<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Nox System</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --bg: #0a0a2a; --card: rgba(30, 30, 50, 0.9); --text: #fff; --accent: #00d4ff;
        }
        body.light {
            --bg: #f0f2f5; --card: #ffffff; --text: #1c1e21; --accent: #0088cc;
        }
        body { background: var(--bg); color: var(--text); font-family: 'Cairo', sans-serif; transition: 0.3s; margin: 0; }
        
        /* Bottom Navigation */
        .nav-bar {
            position: fixed; bottom: 0; width: 100%; background: var(--card);
            display: flex; justify-content: space-around; padding: 10px 0;
            border-top: 1px solid rgba(255,255,255,0.1); backdrop-filter: blur(10px);
        }
        .nav-item { text-align: center; font-size: 0.8rem; color: #888; cursor: pointer; }
        .nav-item.active { color: var(--accent); }
        .nav-item i { font-size: 1.5rem; display: block; }

        /* Sections */
        .section { display: none; padding: 20px; padding-bottom: 80px; }
        .section.active { display: block; animation: fadeIn 0.3s; }
        
        .admin-only { background: linear-gradient(45deg, #ff416c, #ff4b2b); border-radius: 10px; padding: 15px; margin-top: 20px; }
        
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body class="dark">

<div id="home" class="section active">
    <h2>ğŸ  Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</h2>
    <div class="card" style="background: var(--card); padding: 20px; border-radius: 15px;">
        <p>Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Nox. Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„Ø¢Ù†!</p>
        <button onclick="tg.sendData('start_random_chat')" style="width:100%; padding:15px; border-radius:10px; border:none; background: var(--accent); color: white;">ğŸ² Ù…Ø­Ø§Ø¯Ø«Ø© Ø¹Ø´ÙˆØ§Ø¦ÙŠØ©</button>
    </div>
</div>

<div id="search" class="section">
    <h2>ğŸ” Ø¨Ø­Ø« Ù…ØªØ·ÙˆØ±</h2>
    <input type="text" placeholder="Ø§Ø¨Ø­Ø« Ø¨Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ùˆ Ø§Ù„Ù‚Ù†Ø§Ø©..." style="width:90%; padding:12px; border-radius:8px; border:none;">
</div>

<div id="settings" class="section">
    <h2>âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ÙˆØ§Ù„Ø®ØµÙˆØµÙŠØ©</h2>
    <div class="card" onclick="toggleTheme()" style="padding:15px; background:var(--card); margin-bottom:10px; border-radius:10px;">
        ğŸŒ“ ØªØºÙŠÙŠØ± Ø§Ù„Ø«ÙŠÙ… (Ù„ÙŠÙ„ÙŠ/Ù†Ù‡Ø§Ø±ÙŠ)
    </div>
    <div class="card" onclick="openSubscription()" style="padding:15px; background:var(--card); border-radius:10px;">
        ğŸ’ ØªØ±Ù‚ÙŠØ© Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ (Ù†Ø¬ÙˆÙ… ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù…)
    </div>
    
    <div id="admin-panel" class="admin-only" style="display:none;">
        <h3>ğŸ‘‘ Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø§Ù„Ùƒ</h3>
        <p>Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù†Ø´Ø·ÙŠÙ†: <span id="user-count">...</span></p>
        <button onclick="alert('Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø±Ø³Ø§Ù„ÙŠØ© Ù„Ù„ÙƒÙ„')" style="padding:10px; border:none; border-radius:5px;">Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø¹Ù„Ø§Ù† Ø¹Ø§Ù…</button>
    </div>
</div>

<nav class="nav-bar">
    <div class="nav-item active" onclick="showSection('home', this)"><i class="fas fa-home"></i>Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</div>
    <div class="nav-item" onclick="showSection('search', this)"><i class="fas fa-search"></i>Ø¨Ø­Ø«</div>
    <div class="nav-item" onclick="showSection('chats', this)"><i class="fas fa-comments"></i>Ø¯Ø±Ø¯Ø´Ø§Øª</div>
    <div class="nav-item" onclick="showSection('settings', this)"><i class="fas fa-cog"></i>Ø§Ù„Ø§Ø¹Ø¯Ø§Ø¯Ø§Øª</div>
</nav>

<script>
    const tg = window.Telegram.WebApp;
    tg.expand();

    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…Ø§Ù„Ùƒ Ù„Ø¥Ø¸Ù‡Ø§Ø± Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
    const adminIds = [5959433660];
    const urlParams = new URLSearchParams(window.location.search);
    const userId = parseInt(urlParams.get('user_id'));

    if (adminIds.includes(userId)) {
        document.getElementById('admin-panel').style.display = 'block';
    }

    function showSection(id, el) {
        document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
        el.classList.add('active');
    }

    function toggleTheme() {
        document.body.classList.toggle('light');
        tg.HapticFeedback.impactOccurred('medium');
    }

    function openSubscription() {
        // Ø¥Ø±Ø³Ø§Ù„ Ø£Ù…Ø± Ù„Ù„Ø¨ÙˆØª Ù„ÙØªØ­ Ø§Ù„ÙØ§ØªÙˆØ±Ø©
        tg.sendData('action_subscribe');
        tg.close(); // Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø¨ÙˆØª Ù„Ø¯ÙØ¹ Ø§Ù„Ù†Ø¬ÙˆÙ…
    }
</script>
</body>
</html>
